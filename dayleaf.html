<!doctype html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<html lang="en-GB">
    <head>
        <title>can you guess what tree this is?</title>
        <style>
            :root {
                font-family: system-ui;
            }
            body {
                max-width: 40rem;
                margin: 2rem auto;
            }
        </style>
    </head>
    <body>
        <h1>tree idenitfication game</h1>
        <img src="" id="image" height="300" />
        <div>
            <span id="h1" style="font-family: monospace">♥</span>
            <span id="h2" style="font-family: monospace">♥</span>
            <span id="h3" style="font-family: monospace">♥</span>
            <span id="h4" style="font-family: monospace">♥</span>
            <span id="h5" style="font-family: monospace">♥</span>
        </div>
        <div id="answer"></div>
        <form onsubmit="return false">
            <label>
                <input id="query" autocomplete="off" />
                <input
                    id="submit"
                    type="submit"
                    value="guess..."
                    onclick="guess()"
                />
            </label>
        </form>
        <div id="result"></div>
        <ul id="guesses">
            <li id="g5" style="display: none"></li>
            <li id="g4" style="display: none"></li>
            <li id="g3" style="display: none"></li>
            <li id="g2" style="display: none"></li>
            <li id="g1" style="display: none"></li>
        </ul>

        <script>
            let trees = [
                [
                    "oak",
                    "https://upload.wikimedia.org/wikipedia/commons/a/af/Quercus_robur.jpg",
                ],
                [
                    "silver birch",
                    "https://upload.wikimedia.org/wikipedia/commons/8/8a/Betula_pendula_Finland.jpg",
                ],
            ];

            const d = new Date();
            var seed = d.getUTCDate() + d.getUTCMonth() + d.getUTCFullYear();

            function random() {
                var x = Math.sin(seed++) * 10000;
                return x - Math.floor(x);
            }

            let todays = trees[Math.floor(random() * trees.length)];
            let previousGuesses = [];

            document.getElementById("image").src = todays[1];

            function guess() {
                let x = document.getElementById("query").value;
                let res = "";

                if (x == todays[0]) {
                    res = `${x} is right`;
                    document.getElementById("query").disabled = "disabled";
                    document.getElementById("submit").disabled = "disabled";
                } else {
                    res = `${x} is wrong`;
                    document.getElementById(
                        `h${5 - previousGuesses.length}`,
                    ).innerText = "♡";
                }

                previousGuesses.push(res);
                document.getElementById(
                    `g${previousGuesses.length}`,
                ).innerText = res;
                document.getElementById(
                    `g${previousGuesses.length}`,
                ).style.display = "block";

                if (previousGuesses.length == 5) {
                    document.getElementById("query").disabled = "disabled";
                    document.getElementById("submit").disabled = "disabled";
                    document.getElementById("answer").innerText = todays[0];
                }
            }
        </script>
    </body>
</html>
